[{"title":"你好啊","date":"2017-05-11T07:56:00.392Z","path":"2017/05/11/hello-everyone/","content":"<p>你好，很开心来到这里。<br>功能还在完善中，敬请期待。。</p>\n<hr>\n<p>但愿伊姐给我带来好运<br><img src=\"/assets/blogImg/yiyi.jpg\" alt=\"\"></p>\n","comments":true,"tags":[]},{"title":"PHP下Twig的安装与使用","date":"2017-05-11T07:42:48.419Z","path":"2017/05/11/mould/twing20170511/","content":"<ol>\n<li>下载Twig源码 <a href=\"https://github.com/twigphp/Twig/tags\" target=\"_blank\" rel=\"external\">https://github.com/twigphp/Twig/tags</a></li>\n<li>复制lib文件夹下核心目录到CI框架的 common 目录</li>\n<li><p>在CI框架创建扩展文件，路径： ./application/libraries/Twig.php 扩展代码：</p>\n<p>&lt;?php<br>/** </p>\n<ul>\n<li>Created by PhpStorm. </li>\n<li>User: Swain </li>\n<li>Date: 2016/6/8<br>*/<br>require BASEPATH.”common/Twig/Autoloader.php”;<br>class twig<br>{<br>public $twig;  </li>\n</ul>\n<p>public $config;  </p>\n<p>private $data = array();  </p>\n<p>/** </p>\n<ul>\n<li>读取配置文件twig.php并初始化设置 </li>\n<li>*/<br>public function __construct($config)<br>{<br> $config_default = array(  <pre><code>&apos;cache_dir&apos; =&gt; false, //开启缓存  \n&apos;debug&apos; =&gt; false, //开启调试模式（dump函数可用）  \n&apos;auto_reload&apos; =&gt; true,  \n&apos;extension&apos; =&gt; &apos;.tpl&apos;, //默认后缀名  \n</code></pre> );<br> $this-&gt;config = array_merge($config_default, $config);<br> Twig_Autoloader::register ();<br> $loader = new Twig_Loader_Filesystem ($this-&gt;config[‘template_dir’]);<br> $this-&gt;twig = new Twig_Environment ($loader, array (  <pre><code>&apos;cache&apos; =&gt; $this-&gt;config[&apos;cache_dir&apos;],  \n&apos;debug&apos; =&gt; $this-&gt;config[&apos;debug&apos;],  \n&apos;auto_reload&apos; =&gt; $this-&gt;config[&apos;auto_reload&apos;],  \n</code></pre> ) );<br> $CI = &amp; get_instance ();<br> $CI-&gt;load-&gt;helper(array(‘url’));<br> $this-&gt;twig-&gt;addFunction(new Twig_SimpleFunction(‘site_url’, ‘site_url’));<br> $this-&gt;twig-&gt;addFunction(new Twig_SimpleFunction(‘base_url’, ‘base_url’));<br>}  </li>\n</ul>\n<p>/** </p>\n<ul>\n<li>给变量赋值 </li>\n<li></li>\n<li>@param string|array $var </li>\n<li>@param string $value<br>*/<br>public function assign($var, $value = NULL)<br>{<br> if(is_array($var)) {  <pre><code>foreach($var as $key =&gt; $val) {  \n    $this-&gt;data[$key] = $val;  \n}  \n</code></pre> } else {  <pre><code>$this-&gt;data[$var] = $value;  \n</code></pre> }<br>}  </li>\n</ul>\n<p>/** </p>\n<ul>\n<li>模版渲染 </li>\n<li></li>\n<li>@param string $template 模板名 </li>\n<li>@param array $data 变量数组 </li>\n<li>@param string $return true返回 false直接输出页面 </li>\n<li>@return string<br>*/<br>public function render($template, $data = array(), $return = FALSE)<br>{<br> $template = $this-&gt;twig-&gt;loadTemplate ( $this-&gt;getTemplateName($template) );<br> $data = array_merge($this-&gt;data, $data);<br> if ($return === TRUE) {  <pre><code>return $template-&gt;render ( $data );  \n</code></pre> } else {  <pre><code>return $template-&gt;display ( $data );  \n</code></pre> }<br>}  </li>\n</ul>\n<p>/** </p>\n<ul>\n<li>获取模版名 </li>\n<li></li>\n<li>@param string $template<br>*/<br>public function getTemplateName($template)<br>{<br> $default_ext_len = strlen($this-&gt;config[‘extension’]);<br> if(substr($template, -$default_ext_len) != $this-&gt;config[‘extension’]) {  <pre><code>$template .= $this-&gt;config[&apos;extension&apos;];  \n</code></pre> }<br> return $template;<br>}  </li>\n</ul>\n<p>/** </p>\n<ul>\n<li>字符串渲染 </li>\n<li></li>\n<li>@param string $string 需要渲染的字符串 </li>\n<li>@param array $data 变量数组 </li>\n<li>@param string $return true返回 false直接输出页面 </li>\n<li>@return string<br>*/<br>public function parse($string, $data = array(), $return = FALSE)<br>{<br> $string = $this-&gt;twig-&gt;loadTemplate ( $string );<br> $data = array_merge($this-&gt;data, $data);<br> if ($return === TRUE) {  <pre><code>return $string-&gt;render ( $data );  \n</code></pre> } else {  <pre><code>return $string-&gt;display ( $data );  \n</code></pre> }<br>}<br>}  </li>\n</ul>\n</li>\n<li><p>在CI框架创建配制文件，路径： ./application/config/twig.php 配制代码：<br> &lt;?php if ( ! defined(‘BASEPATH’)) exit(‘No direct script access allowed’);<br>// 默认扩展名<br>$config[‘extension’] = “.twig”;<br>// 默认模版路径<br>$config[‘template_dir’] = APPPATH . “views/“;<br>// 缓存目录<br>$config[‘cache_dir’] = APPPATH . “cache/twig/“;<br>// 是否开启调试模式<br>$config[‘debug’] = false;<br>// 自动刷新<br>$config[‘auto_reload’] = true;</p>\n</li>\n</ol>\n<ol>\n<li>设置自动加载 ./application/config/autoload.php 把扩展及配制自动加载<br><code>$autoload[&#39;libraries&#39;] = array(&#39;Twig&#39;);</code><br><code>$autoload[&#39;libraries&#39;] = array(&#39;Twig&#39;);</code></li>\n</ol>\n<h2 id=\"Twig模板的使用\"><a href=\"#Twig模板的使用\" class=\"headerlink\" title=\"##Twig模板的使用\"></a>##Twig模板的使用</h2><p>$loader = new Twig_Loader_Filesystem(‘application/path’);//模板路径</p>\n<p>$twig = new Twig_Environment($loader, array(</p>\n<p>‘cache’ =&gt; ‘/path/compilation_cache’,  //设置缓存，建议调试阶段关闭（缓存太//强大删不掉的那种）</p>\n<p>));</p>\n<p>$template = $twig-&gt;loadTemplate(‘test.twig’);  //载入模板名称</p>\n<p>$template-&gt;display($data);//变量数据传入模板展示</p>\n<p>开发文档：<a href=\"http://twig.sensiolabs.org/documentation\" target=\"_blank\" rel=\"external\">http://twig.sensiolabs.org/documentation</a></p>\n<p>相关链接：<a href=\"http://blog.csdn.net/swain_yj/article/details/51693906\" target=\"_blank\" rel=\"external\">Twig的安装与使用</a></p>\n","comments":true,"tags":[{"name":"模板","slug":"模板","permalink":"http://yinkp.com/tags/模板/"}]},{"title":"最近听了一首歌","date":"2017-05-11T07:16:00.067Z","path":"2017/05/11/emotion/daily20170511/","content":"<p>最近听了一首歌，歌词挺美的，歌声也有画面感。分享给大家。</p>\n<p><img src=\"/assets/blogImg/smrx.png\" alt=\"\"><br><a href=\"http://music.163.com/#/m/playlist?id=422891281&amp;userid=304706205\" target=\"_blank\" rel=\"external\">思美人兮</a></p>\n<p><em>歌词：</em><br>思美人兮 路长漫漫不可及<br>拭泪天涯无归期<br>千言万语 只如梗在心底<br>愁丝万缕一朝夕<br>思美人兮 悠悠浮云为我寄<br>奈何鸿飞不解意<br>归鸟乘风远飞<br>我折翼在原地<br>只见思念划天际<br>男儿志千古愁<br>溢于胸怀中<br>抛入一汪江水向东流<br>笑非笑 忧且忧<br>浊世谁人能懂<br>拂袖独行不回首<br>幽兰花异芬芳<br>含风影自香<br>问君可有识得她芳踪<br>趁年华未散尽<br>摘得芙蓉与共<br>莫让憾事绕心中<br>思美人兮 纵然九死无悔意<br>我心惜古人不及<br>江可竭山可移<br>唯志节不离弃<br>宁求上下无归期<br>男儿志千古愁<br>溢于胸怀中<br>抛入一汪江水向东流<br>笑非笑 忧且忧<br>浊世谁人能懂<br>拂袖独行不回首<br>幽兰花异芬芳<br>含风影自香<br>问君可有识得她芳踪<br>趁年华未散尽<br>摘得芙蓉与共<br>莫让憾事绕心中<br>男儿志千古愁<br>溢于胸怀中<br>抛入一汪江水向东流<br>笑非笑 忧且忧<br>浊世谁人能懂<br>拂袖独行不回首<br>幽兰花异芬芳<br>含风影自香<br>问君可有识得她芳踪<br>趁年华未散尽<br>摘得芙蓉与共<br>莫让憾事绕心中<br>思美人兮<br>漂泊南行无所依<br>我欲随风同归去</p>\n","comments":true,"tags":[{"name":"心情","slug":"心情","permalink":"http://yinkp.com/tags/心情/"}]}]